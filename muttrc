# Inspired by Patrick Brisbin's https://github.com/pbrisbin/mutt-config/blob/master/muttrc
#
# Using mutt from https://github.com/karelzak/mutt-kz
#

# directories and commands
  set alias_file          = ~/.mutt/aliases                       # alias file
  set mailcap_path        = ~/.mutt/mailcap                       # entrys for filetypes
unset signature
  set tmpdir              = ~/.mutt/temp                          # where to keep temp files
  set editor              = "vim -s ~/.mutt/vim/commands"
  set ispell              = "aspell -e -c"                        # use aspell as ispell
  # set print_command       = "enscript -p - | psselect -r | lp"   # print email in reverse page order

# maildir settings
  set mbox_type           = Maildir                               # mailbox type
  set folder              = ~/.mail/gmail                         # mailbox location
  set spoolfile           = "+INBOX"
  set query_command       = "contacts -Sf '%eTOKEN%n' '%s' | sed -e 's/TOKEN/\t/g'"

# notmuch settings
  set nm_default_uri      = "notmuch:///Users/walan/.mail/gmail"  # notmuch uri
  set virtual_spoolfile   = yes

# main options
unset beep_new                                                    # terminal bell on new message
unset confirmappend                                               # don't ask, just do
  set delete                                                      # don't ask, just do
  set mail_check          = 0                                     # minimum time between scans
unset markers                                                     # no ugly plus signs
unset mark_old                                                    # read/new is good enough for me
  set menu_scroll                                                 # scroll in menus
  set pager_index_lines   = 10                                    # number of index lines to show
  set pager_context       = 5                                     # number of context lines to show
  set pager_stop                                                  # don't go to next message automatically
  set pipe_decode                                                 # strip headers and eval mimes when piping
  set reverse_alias                                               # show names from alias file in index
  set sort                = threads                               # like gmail
  set sort_aux            = reverse-last-date-received            # like gmail
unset sort_re                                                     # always thread
  set thorough_search                                             # strip headers and eval mimes before searching
  set thread_received                                             # sort threads by date received, not sent
  set tilde                                                       # show tildes like in vim
  set timeout             = 3                                     # idle time before scanning
unset wait_key                                                    # don't show "Press any key to continue"

# enriched messages
  auto_view text/html                                             # view html automatically
  alternative_order text/plain text/enriched text/html            # but save it for last

# formats and regexps
  set alias_format        = "%4n %t %-20a %r"
  set date_format         = "%Y-%m-%d at %H:%M"
  set forward_format      = "Fwd: %s"                             # format for subject when forwarding
  set index_format        = "%3C %Z %[!%d/%m %H:%m] %?X?₪& ? %-17.17F [%g] %s"
  set quote_regexp        = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"
  set reply_regexp        = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"
  set status_format       = "-%r- %f %m%?n? [+%n]?%?d? [-%d]?%?t? [*%t]? %?p?───/ %p waiting to send /?─%>─(%P)───"

# composing mail
  set askcc                                                       # always ask for CC:
  set edit_headers                                                # show headers when composing
  set fast_reply                                                  # skip to compose when replying
  set forward_quote                                               # include message in forwards
  set include                                                     # include message in replies
  set realname            = "Andreas Wålm"                        # who am i?
  set reply_to                                                    # reply to Reply-to: field, not From:
  set reverse_name                                                # reply as who it was sent to (see alternates)

# headers to show
  ignore *                                                        # ignore all headers
  unignore from: to: cc: date: subject:                           # show only these
  hdr_order from: to: cc: date: subject:                          # and in this order

# source stuff
  source $alias_file
  source ~/.mutt/lists
  source ~/.mutt/sidebar
  source ~/.mutt/colors
# source `case $TERM in\
#               *256color) echo '~/.mutt/colors'; break ;;\
#               *)        echo '~/.mutt/nocolors'; break ;;\
#          esac`
  source ~/.mutt/gmail
  source ~/.mutt/hooks
  source ~/.mutt/bindings

# vim: ft=muttrc
